!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).iro=t()}(this,function(){"use strict";var k,s,t,n,w={},S=[],r=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function C(e,t){for(var n in t)e[n]=t[n];return e}function b(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,n){var r,o,i,l,s=arguments;if(t=C({},t),3<arguments.length)for(n=[n],r=3;r<arguments.length;r++)n.push(s[r]);if(null!=n&&(t.children=n),null!=e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===t[o]&&(t[o]=e.defaultProps[o]);return l=t.key,null!=(i=t.ref)&&delete t.ref,null!=l&&delete t.key,a(e,t,l,i)}function a(e,t,n,r){r={type:e,props:t,key:n,ref:r,n:null,i:null,e:0,o:null,l:null,c:null,constructor:void 0};return k.vnode&&k.vnode(r),r}function E(e){return e.children}function T(e,t){this.props=e,this.context=t}function m(e,t){if(null==t)return e.i?m(e.i,e.i.n.indexOf(e)+1):null;for(var n;t<e.n.length;t++)if(null!=(n=e.n[t])&&null!=n.o)return n.o;return"function"==typeof e.type?m(e):null}function o(e){(!e.f&&(e.f=!0)&&1===s.push(e)||n!==k.debounceRendering)&&(n=k.debounceRendering,(k.debounceRendering||t)(i))}function i(){var e,t,n,r,o,i,l;for(s.sort(function(e,t){return t.d.e-e.d.e});l=s.pop();)l.f&&(0,o=(r=(e=l).d).o,i=e.p,l=e.u,e.u=!1,i&&(t=[],n=x(i,r,C({},r),e.w,void 0!==i.ownerSVGElement,null,t,l,null==o?m(r):o),c(t,r),n!=o&&function e(t){var n,r;if(null!=(t=t.i)&&null!=t.c){for(t.o=t.c.base=null,n=0;n<t.n.length;n++)if(null!=(r=t.n[n])&&null!=r.o){t.o=t.c.base=r.o;break}return e(t)}}(r)))}function j(t,n,e,r,o,i,l,s,a){var c,u,h,d,f,p,g,v=e&&e.n||S,y=v.length;if(s==w&&(s=null!=i?i[0]:y?m(e,0):null),c=0,n.n=A(n.n,function(e){if(null!=e){if(e.i=n,e.e=n.e+1,null===(h=v[c])||h&&e.key==h.key&&e.type===h.type)v[c]=void 0;else for(u=0;u<y;u++){if((h=v[u])&&e.key==h.key&&e.type===h.type){v[u]=void 0;break}h=null}if(d=x(t,e,h=h||w,r,o,i,l,null,s,a),(u=e.ref)&&h.ref!=u&&(g=g||[]).push(u,e.c||d,e),null!=d){if(null==p&&(p=d),null!=e.l)d=e.l,e.l=null;else if(i==h||d!=s||null==d.parentNode){e:if(null==s||s.parentNode!==t)t.appendChild(d);else{for(f=s,u=0;(f=f.nextSibling)&&u<y;u+=2)if(f==d)break e;t.insertBefore(d,s)}"option"==n.type&&(t.value="")}s=d.nextSibling,"function"==typeof n.type&&(n.l=d)}}return c++,e}),n.o=p,null!=i&&"function"!=typeof n.type)for(c=i.length;c--;)null!=i[c]&&b(i[c]);for(c=y;c--;)null!=v[c]&&function e(t,n,r){var o,i,l;if(k.unmount&&k.unmount(t),(o=t.ref)&&R(o,null,n),r||"function"==typeof t.type||(r=null!=(i=t.o)),t.o=t.l=null,null!=(o=t.c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(t){k.o(t,n)}o.base=o.p=null}if(o=t.n)for(l=0;l<o.length;l++)o[l]&&e(o[l],n,r);null!=i&&b(i)}(v[c],v[c]);if(g)for(c=0;c<g.length;c++)R(g[c],g[++c],g[++c])}function A(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)A(e[r],t,n);else n.push(t?t(function(e){if(null==e||"boolean"==typeof e)return null;if("string"==typeof e||"number"==typeof e)return a(null,e,null,null);if(null==e.o&&null==e.c)return e;var t=a(e.type,e.props,e.key,null);return t.o=e.o,t}(e)):e);return n}function u(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===r.test(t)?n+"px":null==n?"":n}function M(e,t,n,r,o){var i,l,s,a,c;if("key"!==(t=o?"className"===t?"class":t:"class"===t?"className":t)&&"children"!==t)if("style"===t)if(i=e.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof r&&(i.cssText="",r=null),r)for(l in r)n&&l in n||u(i,l,"");if(n)for(s in n)r&&n[s]===r[s]||u(i,s,n[s])}else"o"===t[0]&&"n"===t[1]?(a=t!==(t=t.replace(/Capture$/,"")),t=((c=t.toLowerCase())in e?c:t).slice(2),n?(r||e.addEventListener(t,h,a),(e.t||(e.t={}))[t]=n):e.removeEventListener(t,h,a)):"list"!==t&&"tagName"!==t&&"form"!==t&&!o&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function h(e){return this.t[e.type](k.event?k.event(e):e)}function x(e,t,n,r,o,i,l,s,a,c){var u,h,d,f,p,g,v,y,b,m,x=t.type;if(void 0!==t.constructor)return null;(u=k.e)&&u(t);try{e:if("function"==typeof x){if(y=t.props,b=(u=x.contextType)&&r[u.c],m=u?b?b.props.value:u.i:r,n.c?v=(h=t.c=n.c).i=h.k:("prototype"in x&&x.prototype.render?t.c=h=new x(y,m):(t.c=h=new T(y,m),h.constructor=x,h.render=O),b&&b.sub(h),h.props=y,h.state||(h.state={}),h.context=m,h.w=r,d=h.f=!0,h.m=[]),null==h.j&&(h.j=h.state),null!=x.getDerivedStateFromProps&&C(h.j==h.state?h.j=C({},h.j):h.j,x.getDerivedStateFromProps(y,h.j)),d)null==x.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&l.push(h);else{if(null==x.getDerivedStateFromProps&&null==s&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(y,m),!s&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(y,h.j,m)){for(h.props=y,h.state=h.j,h.f=!1,(h.d=t).o=null!=a?a!==n.o?a:n.o:null,t.n=n.n,u=0;u<t.n.length;u++)t.n[u]&&(t.n[u].i=t);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(y,h.j,m)}for(f=h.props,p=h.state,h.context=m,h.props=y,h.state=h.j,(u=k.M)&&u(t),h.f=!1,h.d=t,h.p=e,u=h.render(h.props,h.state,h.context),t.n=A(null!=u&&u.type==E&&null==u.key?u.props.children:u),null!=h.getChildContext&&(r=C(C({},r),h.getChildContext())),d||null==h.getSnapshotBeforeUpdate||(g=h.getSnapshotBeforeUpdate(f,p)),j(e,t,n,r,o,i,l,a,c),h.base=t.o;u=h.m.pop();)h.j&&(h.state=h.j),u.call(h);d||null==f||null==h.componentDidUpdate||h.componentDidUpdate(f,p,g),v&&(h.k=h.i=null)}else t.o=function(e,t,n,r,o,i,l,s){var a,c,u,h,d=n.props,f=t.props;if(o="svg"===t.type||o,null==e&&null!=i)for(a=0;a<i.length;a++)if(null!=(c=i[a])&&(null===t.type?3===c.nodeType:c.localName===t.type)){e=c,i[a]=null;break}if(null==e){if(null===t.type)return document.createTextNode(f);e=o?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),i=null}return null===t.type?d!==f&&(null!=i&&(i[i.indexOf(e)]=null),e.data=f):t!==n&&(null!=i&&(i=S.slice.call(e.childNodes)),u=(d=n.props||w).dangerouslySetInnerHTML,h=f.dangerouslySetInnerHTML,s||(h||u)&&(h&&u&&h.O==u.O||(e.innerHTML=h&&h.O||"")),function(e,t,n,r,o){for(var i in n)i in t||M(e,i,null,n[i],r);for(i in t)o&&"function"!=typeof t[i]||"value"===i||"checked"===i||n[i]===t[i]||M(e,i,t[i],n[i],r)}(e,f,d,o,s),t.n=t.props.children,h||j(e,t,n,r,"foreignObject"!==t.type&&o,i,l,w,s),s||("value"in f&&void 0!==f.value&&f.value!==e.value&&(e.value=null==f.value?"":f.value),"checked"in f&&void 0!==f.checked&&f.checked!==e.checked&&(e.checked=f.checked))),e}(n.o,t,n,r,o,i,l,c);(u=k.diffed)&&u(t)}catch(e){k.o(e,t,n)}return t.o}function c(e,t){for(var n;n=e.pop();)try{n.componentDidMount()}catch(e){k.o(e,n.d)}k.c&&k.c(t)}function R(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){k.o(e,n)}}function O(e,t,n){return this.constructor(e,n)}function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return(l=Object.assign||function(e){for(var t=arguments,n=1;n<arguments.length;n++){var r,o=t[n];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}k={},T.prototype.setState=function(e,t){var n=this.j!==this.state&&this.j||(this.j=C({},this.state));"function"==typeof e&&!(e=e(n,this.props))||C(n,e),null!=e&&this.d&&(this.u=!1,t&&this.m.push(t),o(this))},T.prototype.forceUpdate=function(e){this.d&&(e&&this.m.push(e),this.u=!0,o(this))},T.prototype.render=E,s=[],t="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,n=k.debounceRendering,k.o=function(e,t,n){for(var r;t=t.i;)if((r=t.c)&&!r.i)try{if(r.constructor&&null!=r.constructor.getDerivedStateFromError)r.setState(r.constructor.getDerivedStateFromError(e));else{if(null==r.componentDidCatch)continue;r.componentDidCatch(e)}return o(r.k=r)}catch(t){e=t}throw e};var f=w,p="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",g="[\\s|\\(]+("+p+")[,|\\s]+("+p+")[,|\\s]+("+p+")\\s*\\)?",v="[\\s|\\(]+("+p+")[,|\\s]+("+p+")[,|\\s]+("+p+")[,|\\s]+("+p+")\\s*\\)?",y=new RegExp("rgb"+g),I=new RegExp("rgba"+v),P=new RegExp("hsl"+g),N=new RegExp("hsla"+v),p="^(?:#?|0x?)",g="([0-9a-fA-F]{1})",v="([0-9a-fA-F]{2})",D=new RegExp(p+g+g+g+"$"),H=new RegExp(p+g+g+g+g+"$"),W=new RegExp(p+v+v+v+"$"),$=new RegExp(p+v+v+v+v+"$"),L=Math.log,_=Math.round,B=Math.floor;function z(e,t,n){return Math.min(Math.max(e,t),n)}function U(e,t){var n=-1<e.indexOf("%"),e=parseFloat(e);return n?t/100*e:e}function F(e){return parseInt(e,16)}function q(e){return e.toString(16).padStart(2,"0")}var G=((g=V.prototype).set=function(e){if("string"==typeof e)/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else{if("object"!=typeof e)throw new Error("Invalid color value");e instanceof V?this.hsva=e.hsva:"r"in e&&"g"in e&&"b"in e?this.rgb=e:"h"in e&&"s"in e&&"v"in e?this.hsv=e:"h"in e&&"s"in e&&"l"in e?this.hsl=e:"kelvin"in e&&(this.kelvin=e.kelvin)}},g.setChannel=function(e,t,n){this[e]=l({},this[e],((e={})[t]=n,e))},g.reset=function(){this.hsva=this.initialValue},g.clone=function(){return new V(this)},g.unbind=function(){this.onChange=void 0},V.hsvToRgb=function(e){var t=e.h/60,n=e.s/100,r=e.v/100,o=B(t),i=t-o,l=r*(1-n),e=r*(1-i*n),t=r*(1-(1-i)*n),i=o%6,n=[t,r,r,e,l,l][i],o=[l,l,t,r,r,e][i];return{r:z(255*[r,e,l,l,t,r][i],0,255),g:z(255*n,0,255),b:z(255*o,0,255)}},V.rgbToHsv=function(e){var t=e.r/255,n=e.g/255,r=e.b/255,o=Math.max(t,n,r),i=Math.min(t,n,r),l=o-i,s=0,a=o,e=0===o?0:l/o;switch(o){case i:s=0;break;case t:s=(n-r)/l+(n<r?6:0);break;case n:s=(r-t)/l+2;break;case r:s=(t-n)/l+4}return{h:60*s%360,s:z(100*e,0,100),v:z(100*a,0,100)}},V.hsvToHsl=function(e){var t=e.s/100,n=e.v/100,r=(2-t)*n,o=r<=1?r:2-r;return{h:e.h,s:z(100*(o<1e-9?0:t*n/o),0,100),l:z(50*r,0,100)}},V.hslToHsv=function(e){var t=2*e.l,n=e.s*(t<=100?t:200-t)/100;return{h:e.h,s:z(100*(t+n<1e-9?0:2*n/(t+n)),0,100),v:z((t+n)/2,0,100)}},V.kelvinToRgb=function(e){var t,n,e=e/100,r=e<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=e-2)+104.49216199393888*L(n),e<20?0:.8274096064007395*(r=e-10)-254.76935184120902+115.67994401066147*L(r)):(t=351.97690566805693+.114206453784165*(t=e-55)-40.25366309332127*L(t),n=325.4494125711974+.07943456536662342*(n=e-50)-28.0852963507957*L(n),255);return{r:z(B(t),0,255),g:z(B(n),0,255),b:z(B(r),0,255)}},V.rgbToKelvin=function(e){for(var t,n=e.r,r=e.b,o=2e3,i=4e4;.4<i-o;){var l=V.kelvinToRgb(t=.5*(i+o));l.b/l.r>=r/n?i=t:o=t}return t},g=[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var t=this.$;if(e=l({},t,e),this.onChange){var n,r={h:!1,v:!1,s:!1,a:!1};for(n in t)r[n]=e[n]!=t[n];this.$=e,(r.h||r.s||r.v||r.a)&&this.onChange(this,r)}else this.$=e}},{key:"hsva",get:function(){return l({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=l({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return V.rgbToKelvin(this.rgb)},set:function(e){this.rgb=V.kelvinToRgb(e)}},{key:"red",get:function(){return this.rgb.r},set:function(e){this.rgb=l({},this.rgb,{r:e})}},{key:"green",get:function(){return this.rgb.g},set:function(e){this.rgb=l({},this.rgb,{g:e})}},{key:"blue",get:function(){return this.rgb.b},set:function(e){this.rgb=l({},this.rgb,{b:e})}},{key:"rgb",get:function(){var e=V.hsvToRgb(this.$),t=e.r,n=e.g,e=e.b;return{r:_(t),g:_(n),b:_(e)}},set:function(e){this.hsv=l({},V.rgbToHsv(e),{a:void 0===e.a?1:e.a})}},{key:"rgba",get:function(){return l({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var e=V.hsvToHsl(this.$),t=e.h,n=e.s,e=e.l;return{h:_(t),s:_(n),l:_(e)}},set:function(e){this.hsv=l({},V.hslToHsv(e),{a:void 0===e.a?1:e.a})}},{key:"hsla",get:function(){return l({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var t,n,r,o,i=1;if((t=y.exec(e))?(n=U(t[1],255),r=U(t[2],255),o=U(t[3],255)):(t=I.exec(e))&&(n=U(t[1],255),r=U(t[2],255),o=U(t[3],255),i=U(t[4],1)),!t)throw new Error("Invalid rgb string");this.rgb={r:n,g:r,b:o,a:i}}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+q(e.r)+q(e.g)+q(e.b)},set:function(e){var t,n,r,o,i=255;if((t=D.exec(e))?(n=17*F(t[1]),r=17*F(t[2]),o=17*F(t[3])):(t=H.exec(e))?(n=17*F(t[1]),r=17*F(t[2]),o=17*F(t[3]),i=17*F(t[4])):(t=W.exec(e))?(n=F(t[1]),r=F(t[2]),o=F(t[3])):(t=$.exec(e))&&(n=F(t[1]),r=F(t[2]),o=F(t[3]),i=F(t[4])),!t)throw new Error("Invalid hex string");this.rgb={r:n,g:r,b:o,a:i/255}}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+q(e.r)+q(e.g)+q(e.b)+q(B(255*e.a))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var t,n,r,o,i=1;if((t=P.exec(e))?(n=U(t[1],360),r=U(t[2],100),o=U(t[3],100)):(t=N.exec(e))&&(n=U(t[1],360),r=U(t[2],100),o=U(t[3],100),i=U(t[4],1)),!t)throw new Error("Invalid hsl string");this.hsl={h:n,s:r,l:o,a:i}}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}],e(V.prototype,g),V);function V(e,t){this.$={h:0,s:0,v:0,a:1},e&&this.set(e),this.onChange=t,this.initialValue=l({},this.$)}function K(e){var t=e.width,n=e.sliderSize,r=e.borderWidth,o=e.handleRadius,i=e.padding,l=e.sliderShape,s="horizontal"===e.layoutDirection,n=null!=n?n:2*i+2*o;return"circle"===l?{handleStart:e.padding+e.handleRadius,handleRange:t-2*i-2*o,width:t,height:t,cx:t/2,cy:t/2,radius:t/2-r/2}:{handleStart:n/2,handleRange:t-n,radius:n/2,x:0,y:0,width:s?n:t,height:s?t:n}}var J,X=2*Math.PI,Y=function(e,t){return(e%t+t)%t},Z=function(e,t){return Math.sqrt(e*e+t*t)};function Q(e){return e.width/2-e.padding-e.handleRadius-e.borderWidth}function ee(e){var t=e.width/2;return{width:e.width,radius:t-e.borderWidth,cx:t,cy:t}}function te(e,t,n){var r=e.wheelAngle,e=e.wheelDirection;return n&&"clockwise"===e?t=r+t:"clockwise"===e?t=360-r+t:n&&"anticlockwise"===e?t=r+180-t:"anticlockwise"===e&&(t=r-t),Y(t,360)}function ne(e,t,n){var r=ee(e),o=r.cx,i=r.cy,r=Q(e);t=o-t,n=i-n;e=te(e,Math.atan2(-n,-t)*(360/X)),n=Math.min(Z(t,n),r);return{h:Math.round(e),s:Math.round(100/r*n)}}function re(e){var t=e.width,n=e.boxHeight;return{width:t,height:null!=n?n:t,radius:e.padding+e.handleRadius}}function oe(e,t,n){var r=re(e),o=r.width,e=r.height,r=r.radius,e=(n-r)/(e-2*r)*100;return{s:Math.max(0,Math.min((t-r)/(o-2*r)*100,100)),v:Math.max(0,Math.min(100-e,100))}}function ie(e,t,n,r){for(var o=0;o<r.length;o++){var i=r[o].x-t,l=r[o].y-n;if(Math.sqrt(i*i+l*l)<e.handleRadius)return o}return null}function le(e){return{boxSizing:"border-box",border:e.borderWidth+"px solid "+e.borderColor}}function se(e,t,n){return e+"-gradient("+t+", "+n.map(function(e){var t=e[0];return e[1]+" "+t+"%"}).join(",")+")"}function ae(e){return"string"==typeof e?e:e+"px"}var ce,ue=["mousemove","touchmove","mouseup","touchend"],he=((ce=T)&&(de.__proto__=ce),((de.prototype=Object.create(ce&&ce.prototype)).constructor=de).prototype.render=function(e){var t=this.handleEvent.bind(this),n={onMouseDown:t,ontouchstart:t},r="horizontal"===e.layoutDirection,o=null===e.margin?e.sliderMargin:e.margin,t={overflow:"visible",display:r?"inline-block":"block"};return 0<e.index&&(t[r?"marginLeft":"marginTop"]=o),d(E,null,e.children(this.uid,n,t))},de.prototype.handleEvent=function(e){var t=this,n=this.props.onInput,r=this.base.getBoundingClientRect();e.preventDefault();var o=e.touches?e.changedTouches[0]:e,i=o.clientX-r.left,l=o.clientY-r.top;switch(e.type){case"mousedown":case"touchstart":!1!==n(i,l,0)&&ue.forEach(function(e){document.addEventListener(e,t,{passive:!1})});break;case"mousemove":case"touchmove":n(i,l,1);break;case"mouseup":case"touchend":n(i,l,2),ue.forEach(function(e){document.removeEventListener(e,t,{passive:!1})})}},de);function de(e){ce.call(this,e),this.uid=(Math.random()+1).toString(36).substring(5)}function fe(e){var t=e.r,n=e.url,r=t,o=t;return d("svg",{className:"IroHandle IroHandle--"+e.index+" "+(e.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+ae(e.x)+", "+ae(e.y)+")",willChange:"transform",top:ae(-t),left:ae(-t),width:ae(2*t),height:ae(2*t),position:"absolute",overflow:"visible"}},n&&d("use",Object.assign({xlinkHref:function(e){J=J||document.getElementsByTagName("base");var t=window.navigator.userAgent,n=/^((?!chrome|android).)*safari/i.test(t),r=/iPhone|iPod|iPad/i.test(t),t=window.location;return(n||r)&&0<J.length?t.protocol+"//"+t.host+t.pathname+t.search+e:e}(n)},e.props)),!n&&d("circle",{cx:r,cy:o,r:t,fill:"none","stroke-width":2,stroke:"#000"}),!n&&d("circle",{cx:r,cy:o,r:t-2,fill:e.fill,"stroke-width":2,stroke:"#fff"}))}function pe(r){var e,t,n,o,i=r.activeIndex,f=void 0!==i&&i<r.colors.length?r.colors[i]:r.color,l=K(r),s=l.width,a=l.height,c=l.radius,u=(e=f,t=K(r),n=t.width,o=t.height,i=t.handleRange,l=t.handleStart,o=(t="horizontal"===r.layoutDirection)?n/2:o/2,e=l+function(e,t){var n=t.hsva,r=t.rgb;switch(e.sliderType){case"red":return r.r/2.55;case"green":return r.g/2.55;case"blue":return r.b/2.55;case"alpha":return 100*n.a;case"kelvin":var o=e.minTemperature,i=e.maxTemperature-o,i=(t.kelvin-o)/i*100;return Math.max(0,Math.min(i,100));case"hue":return n.h/=3.6;case"saturation":return n.s;default:return n.v}}(r,e)/100*i,t&&(e=-1*e+i+2*l),{x:t?o:e,y:t?e:o}),h=function(e){var t=f.hsv,n=f.rgb;switch(e.sliderType){case"red":return[[0,"rgb(0,"+n.g+","+n.b+")"],[100,"rgb(255,"+n.g+","+n.b+")"]];case"green":return[[0,"rgb("+n.r+",0,"+n.b+")"],[100,"rgb("+n.r+",255,"+n.b+")"]];case"blue":return[[0,"rgb("+n.r+","+n.g+",0)"],[100,"rgb("+n.r+","+n.g+",255)"]];case"alpha":return[[0,"rgba("+n.r+","+n.g+","+n.b+",0)"],[100,"rgb("+n.r+","+n.g+","+n.b+")"]];case"kelvin":for(var r=[],o=e.minTemperature,i=e.maxTemperature,l=i-o,s=o,a=0;s<i;s+=l/8,a+=1){var c=G.kelvinToRgb(s),u=c.r,h=c.g,c=c.b;r.push([12.5*a,"rgb("+u+","+h+","+c+")"])}return r;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var o=G.hsvToHsl({h:t.h,s:0,v:t.v}),d=G.hsvToHsl({h:t.h,s:100,v:t.v});return[[0,"hsl("+o.h+","+o.s+"%,"+o.l+"%)"],[100,"hsl("+d.h+","+d.s+"%,"+d.l+"%)"]];default:d=G.hsvToHsl({h:t.h,s:t.s,v:100});return[[0,"#000"],[100,"hsl("+d.h+","+d.s+"%,"+d.l+"%)"]]}}(r);return d(he,Object.assign({},r,{onInput:function(i,l,e){var t=function(e){var t=K(e),n=t.handleRange,t=t.handleStart,t="horizontal"===e.layoutDirection?-1*l+n+t:i-t;t=Math.max(Math.min(t,n),0);var r=Math.round(100/n*t);switch(e.sliderType){case"kelvin":var o=e.minTemperature;return o+r/100*(e.maxTemperature-o);case"alpha":return r/100;case"hue":return 3.6*r;case"red":case"blue":case"green":return 2.55*r;default:return r}}(r);r.parent.inputActive=!0,f[r.sliderType]=t,r.onInput(e,r.id)}}),function(e,t,n){return d("div",Object.assign({},t,{className:"IroSlider",style:Object.assign({},{position:"relative",width:ae(s),height:ae(a),borderRadius:ae(c),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},n)}),d("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:ae(c),background:se("linear","horizontal"===r.layoutDirection?"to top":"to right",h)},le(r))}),d(fe,{isActive:!0,index:f.index,r:r.handleRadius,url:r.handleSvg,props:r.handleProps,x:u.x,y:u.y}))})}function ge(l){var r=ee(l).width,o=l.colors,s=(l.borderWidth,l.parent),a=l.color,i=a.hsv,c=o.map(function(e){return t=l,n=e.hsv,r=ee(t),o=r.cx,i=r.cy,e=Q(t),r=(180+te(t,n.h,!0))*(X/360),e=n.s/100*e,t="clockwise"===t.wheelDirection?-1:1,{x:o+e*Math.cos(r)*t,y:i+e*Math.sin(r)*t};var t,n,r,o,i}),u={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};return d(he,Object.assign({},l,{onInput:function(e,t,n){if(0===n){if(r=ee(l),o=r.cx,i=r.cy,r=l.width/2,!(Z(o-e,i-t)<r))return!1;r=ie(l,e,t,c);null!==r?s.setActiveColor(r):(s.inputActive=!0,a.hsv=ne(l,e,t),l.onInput(n,l.id))}else 1===n&&(s.inputActive=!0,a.hsv=ne(l,e,t));var r,o,i;l.onInput(n,l.id)}}),function(e,t,n){return d("div",Object.assign({},t,{className:"IroWheel",style:Object.assign({},{width:ae(r),height:ae(r),position:"relative"},n)}),d("div",{className:"IroWheelHue",style:Object.assign({},u,{transform:"rotateZ("+(l.wheelAngle+90)+"deg)",background:"clockwise"===l.wheelDirection?"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)":"conic-gradient(red, magenta, blue, aqua, lime, yellow, red)"})}),d("div",{className:"IroWheelSaturation",style:Object.assign({},u,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),l.wheelLightness&&d("div",{className:"IroWheelLightness",style:Object.assign({},u,{background:"#000",opacity:1-i.v/100})}),d("div",{className:"IroWheelBorder",style:Object.assign({},u,le(l))}),o.filter(function(e){return e!==a}).map(function(e){return d(fe,{isActive:!1,index:e.index,fill:e.hslString,r:l.handleRadius,url:l.handleSvg,props:l.handleProps,x:c[e.index].x,y:c[e.index].y})}),d(fe,{isActive:!0,index:a.index,fill:a.hslString,r:l.activeHandleRadius||l.handleRadius,url:l.handleSvg,props:l.handleProps,x:c[a.index].x,y:c[a.index].y}))})}fe.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}},pe.defaultProps=Object.assign({},{sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3});var ve,p=((ve=T)&&(ye.__proto__=ve),((ye.prototype=Object.create(ve&&ve.prototype)).constructor=ye).prototype.addColor=function(e,t){void 0===t&&(t=this.colors.length);e=new G(e,this.onColorChange.bind(this));this.colors.splice(t,0,e),this.colors.forEach(function(e,t){return e.index=t}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",e)},ye.prototype.removeColor=function(e){e=this.colors.splice(e,1)[0];e.unbind(),this.colors.forEach(function(e,t){return e.index=t}),this.state&&this.setState({colors:this.colors}),e.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",e)},ye.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},ye.prototype.setColors=function(e,t){var n=this;void 0===t&&(t=0),this.colors.forEach(function(e){return e.unbind()}),this.colors=[],e.forEach(function(e){return n.addColor(e)}),this.setActiveColor(t),this.emit("color:setAll",this.colors)},ye.prototype.on=function(e,t){var n=this,r=this.events;(Array.isArray(e)?e:[e]).forEach(function(e){(r[e]||(r[e]=[])).push(t),n.deferredEvents[e]&&(n.deferredEvents[e].forEach(function(e){t.apply(null,e)}),n.deferredEvents[e]=[])})},ye.prototype.off=function(e,t){var n=this;(Array.isArray(e)?e:[e]).forEach(function(e){e=n.events[e];e&&e.splice(e.indexOf(t),1)})},ye.prototype.emit=function(e){for(var t=this,n=[],r=arguments.length-1;0<r--;)n[r]=arguments[r+1];var o=this.activeEvents;o.hasOwnProperty(e)&&o[e]||(o[e]=!0,(this.events[e]||[]).forEach(function(e){return e.apply(t,n)}),o[e]=!1)},ye.prototype.deferredEmit=function(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];var r=this.deferredEvents;this.emit.apply(this,[e].concat(t)),(r[e]||(r[e]=[])).push(t)},ye.prototype.setOptions=function(e){this.setState(e)},ye.prototype.resize=function(e){this.setOptions({width:e})},ye.prototype.reset=function(){this.colors.forEach(function(e){return e.reset()}),this.setState({colors:this.colors})},ye.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},ye.prototype.onColorChange=function(e,t){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,t)),this.emit("color:change",e,t)},ye.prototype.emitInputEvent=function(e,t){0===e?this.emit("input:start",this.color,t):1===e?this.emit("input:move",this.color,t):2===e&&this.emit("input:end",this.color,t)},ye.prototype.render=function(e,r){var o=this,t=r.layout;return Array.isArray(t)||(t=[{component:ge},{component:pe}],r.transparency&&t.push({component:pe,options:{sliderType:"alpha"}})),d("div",{class:"IroColorPicker",id:r.id,style:{display:r.display}},t.map(function(e,t){var n=e.component,e=e.options;return d(n,Object.assign({},r,e,{ref:void 0,onInput:o.emitInputEvent.bind(o),parent:o,index:t}))}))},ye);function ye(e){var t=this;ve.call(this,e),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=e.id,(0<e.colors.length?e.colors:[e.color]).forEach(function(e){return t.addColor(e)}),this.setActiveColor(0),this.state=Object.assign({},e,{color:this.color,colors:this.colors,layout:e.layout})}p.defaultProps=Object.assign({},{width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},{colors:[],display:"block",id:null,layout:"default",margin:null});var be,v=(me.prototype=(be=p).prototype,Object.assign(me,be),me.I=be,me);function me(t,e){var n,r,o,i,l,s=document.createElement("div");function a(){var e=t instanceof Element?t:document.querySelector(t);e.appendChild(n.base),n.onMount(e)}return r=d(be,Object.assign({},{ref:function(e){return n=e}},e)),o=s,k.i&&k.i(r,o),e=(l=i===f)?null:i&&i.n||o.n,r=d(E,null,[r]),s=[],x(o,l?o.n=r:(i||o).n=r,e||w,w,void 0!==o.ownerSVGElement,i&&!l?[i]:e?null:S.slice.call(o.childNodes),s,!1,i||w,l),c(s,r),"loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a),n}return(p=g={}).version="5.5.2",p.Color=G,p.ColorPicker=v,(p=p.ui||(p.ui={})).h=d,p.ComponentBase=he,p.Handle=fe,p.Slider=pe,p.Wheel=ge,p.Box=function(i){var e=re(i),r=e.width,o=e.height,l=e.radius,s=i.colors,a=i.parent,c=void 0!==(e=i.activeIndex)&&e<i.colors.length?i.colors[e]:i.color,u=[[[0,"#fff"],[100,"hsl("+c.hue+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]],h=s.map(function(e){return t=re(i),n=t.width,r=t.height,o=t.radius,t=e.hsv,r-=2*o,{x:o+t.s/100*(n-2*o),y:o+(r-t.v/100*r)};var t,n,r,o});return d(he,Object.assign({},i,{onInput:function(e,t,n){var r;0===n?null!==(r=ie(i,e,t,h))?a.setActiveColor(r):(a.inputActive=!0,c.hsv=oe(i,e,t),i.onInput(n,i.id)):1===n&&(a.inputActive=!0,c.hsv=oe(i,e,t)),i.onInput(n,i.id)}}),function(e,t,n){return d("div",Object.assign({},t,{className:"IroBox",style:Object.assign({},{width:ae(r),height:ae(o),position:"relative"},n)}),d("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:ae(l)},le(i),{background:se("linear","to bottom",u[1])+","+se("linear","to right",u[0])})}),s.filter(function(e){return e!==c}).map(function(e){return d(fe,{isActive:!1,index:e.index,fill:e.hslString,r:i.handleRadius,url:i.handleSvg,props:i.handleProps,x:h[e.index].x,y:h[e.index].y})}),d(fe,{isActive:!0,index:c.index,fill:c.hslString,r:i.activeHandleRadius||i.handleRadius,url:i.handleSvg,props:i.handleProps,x:h[c.index].x,y:h[c.index].y}))})},g}),function(s,a){a.fieldTypes.color_picker=function(o,i){var l={value:i.value||"#fafafa"};if(void 0!==i.properties.swatch_colors)for(var e=i.properties.swatch_colors.split(","),t=0;t<16;t++)void 0!==e[t]&&(i.properties["swatch"+(t+1)]=e[t]);var n={title:_("contentblocks.colorpicker"),html:tmpl("contentblocks-color-picker-modal",{properties:i.properties}),options:{width:"630px",initCallback:function(t,e){l.element=document.getElementById("color-picker-widget"),l.colorPicker=new iro.ColorPicker(l.element,{width:280,color:l.value,borderWidth:0,layout:[{component:iro.ui.Box},{component:iro.ui.Slider,options:{id:"hue-slider",sliderType:"hue"}}]}),l.swatchGrid=t.find("#swatch-grid"),l.swatchGrid.on("click",function(e){e=e.target;e.dataset.color&&l.colorPicker.color.set(e.dataset.color)});var n=t.find("#hex-input"),r=t.find("#values");l.colorPicker.on(["color:init","color:change"],function(e){n.val(e.hexString),r.html(["rgb: "+e.rgbString,"hsl: "+e.hslString].join("<br>")),l.selectedColorEl=t.find("#selected-color"),l.selectedColorEl.css("background-color",e.hexString),l.selectedColorEl.data("color",e.hexString),l.selectedColor=e.hexString}),n.on("keyup",function(e){"Enter"===e.key&&(7!==n.val().length&&4!==n.val().length||"#"!==n.val().charAt(0)||l.colorPicker.color.set(n.val()))}),t.find(".cancel").on("click",a.closeModal),t.find(".select").on("click",function(){var n,r,e;o.find("#"+i.generated_id+"-color-picker-button").css("background-color",l.selectedColor),o.find("#"+i.generated_id+"-color-picker-code").html(l.selectedColor),l.value=l.selectedColor,"layout"===i.settingType||"field"===i.settingType?(o.find(".setting-color-picker-button").css("background-color",l.selectedColor),o.find(".color-picker-code").html(l.selectedColor),(e=o.find("input[type=hidden]")).val(l.selectedColor),e.trigger("change"),a.closeModal()):"modal"===i.settingType?(n=l.selectedColor,r=localStorage.getItem("layout-settings-modal-id"),(e=s("#contentblocks-modal").find(".contentblocks-modal-content")).removeAttr("id"),e.replaceWith(s("#saved-modal-content")),s("#contentblocks-modal").find("input").each(function(e,t){t.getAttribute("name")!==r+"-setting-"+i.reference&&t.getAttribute("name")!==i.inputName||(t.value=n,t.parentNode.querySelector("span").innerText=n,(t=t.parentNode.querySelector("button")).style.background=n,t.dataset.color=n)})):a.closeModal()})}}};return l.init=function(){var e="layout"===i.settingType||"field"===i.settingType||"modal"===i.settingType?o.find(".setting-color-picker-button"):o.find("#"+i.generated_id+"-color-picker-button");"modal"===i.settingType?e.on("click",function(e){var t=s(this).closest(".contentblocks-modal-content");t.attr("id","saved-modal-content"),t.appendTo(s(document.body)),a.openModal(n.title,n.html,n.options)}):e.on("click",function(e){a.openModal(n.title,n.html,n.options)})},l.getData=function(){return{value:l.value}},l}}(vcJquery,ContentBlocks);
//# sourceMappingURL=color-picker-min.js.map