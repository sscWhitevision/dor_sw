{"version":3,"sourceRoot":"../../","sources":["js/inputs/gallery.js"],"names":["$","ContentBlocks","fieldTypes","gallery","dom","data","input","imageCount","fileBrowser","source","properties","ContentBlocksConfig","directory","init","this","initUpload","thumbnail_size","length","thumb_size","find","addClass","on","click","proxy","chooseImage","promptImage","MODx","load","xtype","target","targetEl","get","onInsert","val","addImageFromUrl","isArray","images","each","idx","img","id","generated_id","width","height","addImage","sortable","connectWith","forceHelperSize","forcePlaceholderSize","placeholder","tolerance","cursor","update","fixColumnHeights","fireChange","start","event","ui","item","toBoolean","show_description","show_link_field","maxImages","max_images","numImages","alert","_","max","Ext","multiple","listeners","select","imageData","chooseImageCallback","allowedFileTypes","file_types","hideFiles","title","setSource","show","url","fullRelativeUrl","substr","config","base_url","imageId","attr","size","extension","ext","filename","description","link","image_width","image_height","Msg","prompt","btn","ajax","dataType","connector_url","type","beforeSend","xhr","settings","crossDomain","setRequestHeader","siteId","action","field","resource","ContentBlocksResource","context","success","result","urls","removeClass","utilities","normaliseUrls","object","cleanedSrc","message","values","holder","thumbDisplay","getThumbnailUrl","displaySrc","append","tmpl","inserted","fadeOut","remove","initializeLinkField","fileupload","connectorUrl","dropZone","progressInterval","paramName","pasteZone","add","e","files","name","split","pop","domId","window","FileReader","reader","onload","readAsDataURL","setTimeout","submit","done","responseData","record","file","fail","formData","value","request","progress","parseInt","loaded","total","css","getData","$img","$link","linkType","getLinkFieldDataType","push","vcJquery"],"mappings":"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"}