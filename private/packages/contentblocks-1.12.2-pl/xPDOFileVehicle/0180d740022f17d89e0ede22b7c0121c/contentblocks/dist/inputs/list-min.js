!function(a,o){o.fieldTypes.list=function(t,s){var u={itemId:0,rootList:!1,init:function(){a.isArray(s.items)?(u.rootList=t.find("ul"),a.each(s.items,function(e,t){u.addRecursiveItem(u.rootList,t)})):u.addItem(t.find(".contentblocks-field-list-outer"),{value:""}),t.find("ul, ol").sortable({items:"li",connectWith:".contentblocks-field-list-outer ul, .contentblocks-field-list-outer ol",forceHelperSize:!0,forcePlaceholderSizeType:!0,placeholder:"ui-sortable-list-placeholder",tolerance:"pointer",cursor:"move",cancel:"input,textarea,button,select,option",handle:".contentblocks-field-list-move",update:function(e,t){t.item.trigger("contentblocks:field_dragged"),o.fixColumnHeights(),o.fireChange()},start:function(e,t){t.placeholder.height(t.item.height())}})},addRecursiveItem:function(i,e){var n=this.addItem(i,{value:e.value});e.items&&e.items.length&&a.each(e.items,function(e,t){u.addRecursiveItem(i.find("#"+n).find("ul").first(),t)})},addItem:function(e,t,i,n){u.itemId++,(t=t||{value:""}).id="contentblocks-list-item"+u.itemId,n=n||0===n?n:"last";var l=tmpl("contentblocks-field-list-item",t);"last"===n?e.append(l):e.children("li").eq(n).after(l);var e=e.find("#"+t.id),f=e.find("input");return f.on("keydown",function(e){var t,i,n,l,s,o=e.which||e.keyCode,c=a(this),d=c.closest("li"),r=c.val();13==o?(e.preventDefault(),u.addItem(c.closest("ul"),{},!0,d.index())):8==o?""==r&&(e.preventDefault(),1<u.rootList.find("li").length&&(t=jQuery.Event("keydown",{which:38}),f.trigger(t),c.closest("li").remove())):9==o?(e.preventDefault(),t=null,n=!1,e.shiftKey?(c=(t=c.closest("ul").closest("li")).closest(".contentblocks-field-list-outer"),t&&0<c.length&&(d.nextAll().appendTo(d.find("ul").first()),d.insertAfter(t),n=!0)):(t=d.prev().find("ul").first()).length&&(d.appendTo(t),n=!0),n&&((i=d.find("input")).hasClass("tinyrte-replaced")&&(i.show(),i.siblings(".tinyrte-container").hide()),i.focus())):38==o?(s=null,(n=d.prev()).length?s=(i=n.find("li").last()).length?i:n:(n=(l=d.closest("ul").closest("li")).closest(".contentblocks-field-list-outer").length,l.length&&n&&(s=l)),s&&s.find("input").first().focus()):40==o&&(l=null,s=d.find("li").first(),o=d.next(),s.length?l=s:o.length?l=o:(d=(o=d.closest("ul").closest("li").next()).closest(".contentblocks-field-list-outer").length,o.length&&d&&(l=o)),l&&l.find("input").first().focus())}),e.find(".contentblocks-field-list-add").on("click",function(){var e=a(this).closest("li").find(".contentblocks-field-list-nested"),t=e.find("ul > li"),i=a(this);0<t.length?(t.remove(),i.text("»")):(u.addItem(e.find("ul"),{},!0),i.text("«")),o.fireChange()}),e.find(".contentblocks-field-list-delete").on("click",function(){a(this).closest("li").remove(),o.fireChange(),o.fixColumnHeights()}),i&&f.focus(),o.fixColumnHeights(),o.toBoolean(s.properties.use_tinyrte)&&o.addTinyRte(f),t.id},getData:function(){var e=t.find(".contentblocks-field-list-outer"),i=[];return e.children("li").each(function(e,t){t=a(t);i.push({value:t.find("input").first().val(),items:u.getNested(t)})}),{items:i}},getNested:function(e){var i=[];return e.find("ul").first().children("li").each(function(e,t){t=a(t);i.push({value:t.find("input").first().val(),items:u.getNested(t)})}),i}};return u},o.fieldTypes.ordered_list=function(e,t){return o.fieldTypes.list(e,t)}}(vcJquery,ContentBlocks);
//# sourceMappingURL=list-min.js.map